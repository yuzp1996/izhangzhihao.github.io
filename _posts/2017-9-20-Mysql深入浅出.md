****
#### SQL分类

SQL 语句主要可以划分为以下 3 个类别。




|特性  |DDL |DML |DCL|
|---| --- | ---|---|
|定义|数据定义语言|数据操纵语句|数据控制语句|
|作用|定义了不同的数据段、数据库、表、列、索引等数据库对象的定义|用于添加、删除、更新和查询数据库记录，并检查数据完整性|数据控制语句，用于控制不同数据段直接的许可和访问级别的语句。这些语句定义了数据库、表、字段、用户的访问权限和安全级别|
|关键字|create、drop、alter等。| insert、delete、udpate 和select 等。|grant、revoke|
|特性|DDL 语句更多的被数据库管理员（DBA）所使用|DML 只是对表内部数据的操作||

*****
### 关键语法

>CREATE DATABASE dbname;

[可能出现的问题](http://blog.sina.com.cn/s/blog_7d553bb50102w9rb.html)

>show databases;

安装MySQL 时系统自动创建的，其各自功能如下。

|表名|information_schema|cluster|mysql|test|
|----|----|----|----|----|
|功能|主要存储了系统中的一些数据库对象信息。比如用户表信息、列信息、权限信息、字符集信息、分区信息等。|存储了系统的集群信息|存储了系统的用户权限信息。|系统自动创建的测试数据库，任何用户都可以使用|


> USE dbname;

> show tables;

删库
>drop database dbname;

在数据库中创建一张表的基本语法如下：

```
CREATE TABLE tablename (column_name_1 column_type_1 constraints，column_name_2  column_type_2  constraints ， ……column_name_n  column_type_n
constraints）

实例	>create table emp(ename varchar(10),hiredate date,sal decimal(10,2),deptno int(2));

```

表创建完毕后，如果需要查看一下表的定义，可以使用如下命令：

>DESC tablename

```
mysql> desc emp;
+----------+---------------+------+-----+---------+-------+
| Field | Type | Null | Key | Default | Extra |
+----------+---------------+------+-----+---------+-------+
| ename | varchar(10) | YES | | | |
| hiredate | date | YES | | | |
| sal | decimal(10,2) | YES | | | |
| deptno | int(2) | YES | | | |
+----------+---------------+------+-----+---------+-------+
4 rows in set (0.00 sec)
```

详细：更详细，比如存储引擎，字符集

>show create table emp \G;

```
mysql> show create table emp \G;
*************************** 1. row ***************************
Table: emp
Create Table: CREATE TABLE `emp` (
`ename` varchar(20) DEFAULT NULL,
`hiredate` date DEFAULT NULL,
`sal` decimal(10,2) DEFAULT NULL,
`deptno` int(2) DEFAULT NULL,
```


删除表

>DROP TABLE tablename


*****

#### 在大多数情况下，表结构的更改一般都使用 alter table 语句，以下是一些常用的命令。

（1） 修改表类型，语法如下：

>ALTER TABLE tablename MODIFY [COLUMN] column_definition [FIRST | AFTER col_name]

修改表 emp 的 ename 字段定义，将 varchar(10)改为 varchar(20)

```alter table emp modify ename varchar(20);```

（2）增加表字段，语法如下：

>ALTER TABLE tablename ADD [COLUMN] column_definition [FIRST | AFTER col_name]

例如，表 emp 上新增加字段 age，类型为 int(3)

```alter table emp add column age int(3);```

（3）删除表字段，语法如下：

>ALTER TABLE tablename DROP [COLUMN] col_name

例如，将字段 age 删除掉：

mysql> alter table emp drop column age;


注意：change 和 modify都可以修改表的定义，不同的是 change 后面需要写两次列名，不方便。
但是 change 的优点是可以修改列名称，modify则不能。


（5）修改字段排列顺序。

前面介绍的的字段增加和修改语法（ADD/CNAHGE/MODIFY）中，都有一个可选项 first|after
column_name，这个选项可以用来修改字段在表中的位置，默认 ADD 增加的新字段是加在
表的最后位置，而 CHANGE/MODIFY 默认都不会改变字段的位置。

例如，将新增的字段 birth date 加在 ename 之后：

>alter table emp add birth date after ename;

修改字段 age，将它放在最前面：

>mysql> alter table emp modify age int(3) first;

（6）表改名，语法如下：

>ALTER TABLE tablename RENAME [TO] new_tablename

例如，将表 emp 改名为 emp1，命令如下：

>mysql> alter table emp rename emp1;


*****

DML 操作是指对数据库中表记录的操作， 主要包括表记录的插入 （insert） 、 更新 （update） 、

删除（delete）和查询（select） ，是开发人员日常使用最频繁的操作。

### 1插入记录

>INSERT INTO tablename (field1,field2,……fieldn) VALUES(value1,value2,……valuesn);

实例：
>> insert into emp (ename,hiredate,sal,deptno) values('zzx1','2000-01-01','2000',1);

查看
>select * from emp

### 更新记录

>UPDATE tablename SET field1=value1，field2.=value2，……fieldn=valuen [WHERE CONDITION]

实例
> update emp set sal=4000 where ename='lisa';


update 命令可以同时更新多个表中数据，语法如下：

>UPDATE t1,t2…tn set t1.field1=expr1,tn.fieldn=exprn [WHERE CONDITION]

实例

>update  emp  a,dept b  set  a.sal=a.sal*b.deptno,b.deptname=a.ename  where
a.deptno=b.deptno;

多表更新的语法更多地用在了根据一个表的字段，来动态的更新另外一个表的字段



#### 删除记录

>DELETE FROM tablename [WHERE CONDITION]

例如，在 emp 中将 ename 为‘dony’的记录全部删除，命令如下：

> delete from emp where ename='dony';


在 MySQL 中可以一次删除多个表的数据，语法如下：
DELETE t1,t2…tn FROM t1,t2…tn [WHERE CONDITION]

> delete a,b from emp a,dept b where a.deptno=b.deptno and a.deptno=3;

不管是单表还是多表， 不加 where 条件将会把表的所有记录删除， 所以操作时一定要小心。


#### 查询记录

>SELECT * FROM tablename [WHERE CONDITION]


```
1）查询不重复的记录。
有时需要将表中的记录去掉重复后显示出来，可以用 distinct 关键字来实现：
mysql> select ename,hiredate,sal,deptno from emp;
+--------+------------+---------+--------+
| ename | hiredate | sal | deptno |
+--------+------------+---------+--------+
| zzx | 2000-01-01 | 2000.00 | 1 |
| lisa | 2003-02-01 | 4000.00 | 2 |
| bjguan | 2004-04-02 | 5000.00 | 1 |
+--------+------------+---------+--------+
3 rows in set (0.00 sec)
mysql> select distinct deptno from emp;
+--------+
| deptno |
+--------+
| 1 |
| 2 |
+--------+
2 rows in set (0.00 sec)
```

> select * from emp where deptno=1;

（3）排序和限制。
我们经常会有这样的需求， 取出按照某个字段进行排序后的记录结果集， 这就用到了数据库
的排序操作，用关键字 ORDER BY 来实现，语法如下：

>SELECT * FROM tablename [WHERE CONDITION] [ORDER BY field1 [DESC|ASC]，field2
[DESC|ASC]，……fieldn [DESC|ASC]]

其中，DESC 和 ASC 是排序顺序关键字，DESC 表示按照字段进行降序排列，ASC 则表示升序
排列，如果不写此关键字默认是升序排列。ORDER BY 后面可以跟多个不同的排序字段，并
且每个排序字段可以有不同的排序顺序。


对于排序后的记录，如果希望只显示一部分，而不是全部，这时，就可以使用 LIMIT 关键字
来实现，LIMIT 的语法如下：

>SELECT ……[LIMIT offset_start,row_count]

其中 offset_start 表示记录的起始偏移量，row_count 表示显示的行数。

emp 表中按照 sal 排序后的前 3 条记录：

mysql> select * from emp order by sal limit 3;

如果要显示 emp 表中按照 sal 排序后从第二条记录开始，显示 3 条记录：

mysql> select * from emp order by sal limit 1,3;




