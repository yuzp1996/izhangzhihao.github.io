## 八皇后问题--回溯法应用

回溯法：

回溯法（探索与回溯法）是一种选优搜索法，又称为试探法，按选优条件向前搜索，以达到目标。 但当探索到某一步时，发现原先选择并不优或达不到目标，就退回一步重新选择，这种走不通就退回再走的技术为回溯法，而满足回溯条件的某个状态的点称为“回溯点”。

####问题：能够在8×8的国际象棋棋盘上放置八个皇后，使得任何一个皇后都无法直接吃掉其他的皇后？为了达到此目的，任两个皇后都不能处于同一条横行、纵行或斜线上。


文件名：eightqueen


state是个元祖，state[0]=3表明的是第一行皇后放在第四列

首先定义冲突，state表明所有的已经放置好的皇后比如(1,3,0),nextX表明下一行x的位置。



```
# -*-coding:utf-8-*- 
def conflict(state, nextX):# 判断冲突，
    nextY = len(state)
    for i in range(nextY):
        if abs(state[i]-nextX) in (0,nextY-i):  #同一纵行或者对角线上
            return True
    return False

def queens(num=8, state=()):#进行递归
    for pos in range(num):
        if not conflict(state,pos):
            if len(state) == num-1:
                yield(pos,)
            else:
                for result in queens(num,state+(pos,)):
                    yield (pos,)+result

def prettyprint(solution):#进行打印，打印出任意一个解决方案
    def line(pos, length=len(solution)):
        return '. '*(pos)+'X'+'. '*(length-pos-1)
    for pos in solution:
        print line(pos)

```

使用：


> from eightqueen import conflict,queens,prettyprint

> import random

>prettyprint(random.choice(list(queens(8))))


```
. . . X. . . .
. X. . . . . .
. . . . . . . X
. . . . . X. .
X. . . . . . .
. . X. . . . .
. . . . X. . .
. . . . . . X.
```